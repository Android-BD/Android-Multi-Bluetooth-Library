<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="chrome=1">
      <link rel="icon" href="images/logo.png">
      <title>Android-multi-bluetooth-library by arissa34</title>
        <meta name="description" content="This library allows you to easily create a socket bluetooth connection for multiple android devices with one server and 7 clients max. This library is compatible with the Android SDK 2.3 to 5.1." />
        <meta name="keywords" content="Android, Bluetooth, Library, Server, Socket, Client, Gradle, Maven, BEER-WARE" />
      <link rel="stylesheet" href="stylesheets/styles.css">
      <link rel="stylesheet" href="stylesheets/pygment_trac.css">
      <link href="stylesheets/prettify.css" rel="stylesheet">
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
      <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
   </head>
   <body style="background-image:url(images/background.png);">
      <div class="wrapper">
         <header>
            <h1 style="text-align:center;">Android<br>Multi Bluetooth<br>Library</h1>
            <img style="margin: 20px 0;" src="images/logo.png">
            <p class="view"><a href="https://github.com/arissa34/Android-Multi-Bluetooth-Library">View the Project on GitHub <small>arissa34/Android-Multi-Bluetooth-Library</small></a></p>
            <ul>
               <li><a href="https://github.com/arissa34/Android-Multi-Bluetooth-Library/zipball/master">Download <strong style="margin-top:3px;">ZIP File</strong></a></li>
               <li><a href="https://github.com/arissa34/Android-Multi-Bluetooth-Library/tarball/master">Download <strong style="margin-top:3px;">TAR Ball</strong></a></li>
               <li><a target="_blank" href="https://github.com/arissa34/Android-Multi-Bluetooth-Library">View On <strong style="margin-top:3px;">GitHub</strong></a></li>
            </ul>
         </header>
         <section style="padding:20px;background-color:rgba(255, 255, 255, 0.9);">
            <h3>
               <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction
            </h3>
            <p>This library allows you to easily create a socket bluetooth connection for multiple android devices with one server and 7 clients max. This library is compatible with the Android SDK 2.3 to 8.0.</p>
           <!--      <a target="_blank" href="images/server_clients.png"><img style="margin: 20px 0;" src="images/server_clients.png"></a> -->

           <iframe style="width:100%" height="315" src="https://www.youtube.com/embed/svzu2qd_fOo" frameborder="0" allowfullscreen></iframe>
            <p>This library is based on my <a target="_blank" href="http://arissa34.github.io/Android-Bluetooth-Library/">Android Bluetooth Library</a></p>
            <h3>
               <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true">
                <span class="octicon octicon-link"></span>
                </a>How it works
            </h3>
            <p>
              For a connection between the server and the client, we need a unique UUID.<br> This library will scan all devices around you and create an server thread with an unique UUID to allow the client a connection.
            </p>
            <p>After finding a device, this library create the UUID following this code :</p>

            <pre class="prettyprint">UUID.fromString("e0917680-d427-11e4-8830-" + mMacAddress.replace(":", ""));</pre>

<p>To make it work an simple implementation with extended BluetoothActivity or FragmentActivity.</p>
<pre class="prettyprint">
public class MainActivity extends BluetoothActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public String setUUIDappIdentifier() {
        return "e0917680-d427-11e4-8830";
    }
    
    @Override
    public int myNbrClientMax() {
        return 7;
    }

    @Override
    public void onBluetoothStartDiscovery() {
    }

    @Override
    public void onBluetoothDeviceFound(BluetoothDevice device) {
    }

    @Override
    public void onClientConnectionSuccess() {
    }

    @Override
    public void onClientConnectionFail() {
    }

    @Override
    public void onServeurConnectionSuccess() {
    }

    @Override
    public void onServeurConnectionFail() {
    }

    @Override
    public void onBluetoothMsgStringReceived(String messageReceive) {
    }

    @Override
    public void onBluetoothMsgObjectReceived(Object o) {
    }

    @Override
    public void onBluetoothMsgBytesReceived(byte[] bytes) {
    }

    @Override
    public void onBluetoothNotAviable() {
    }
}
</pre>

<p>You can also extend your fragment with BluetoothFragment. Don't forget to past the activity result from your activity to your fragment.</p>

<h4>AndroidManifest.xml</h4>
<pre class="prettyprint"><code>&lt;uses-permission android:name="android.permission.BLUETOOTH"/>
&lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
&lt;!-- For android sdk >= 6.0 -->
&lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
&lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCTION"/>
&lt;!-- For android sdk >= 6.0 -->
</pre></code>
<p>For Android 6.0 and upper you will need more permissions to scan bluetooth devices</p>
<pre class="prettyprint"><code>
private static final int PERMISSION_REQUEST_COARSE_LOCATION = 1;

if (Build.VERSION.SDK_INT >= 23) {
   int permissionCheck = this.checkSelfPermission("Manifest.permission.ACCESS_FINE_LOCATION");
   permissionCheck += this.checkSelfPermission("Manifest.permission.ACCESS_COARSE_LOCATION");
   if (permissionCheck != PackageManager.PERMISSION_GRANTED) {
      requestPermissions(new String[]{Manifest.permission.ACCESS_COARSE_LOCATION, Manifest.permission.ACCESS_FINE_LOCATION}, PERMISSION_REQUEST_COARSE_LOCATION);
   }
}
        
@Override
public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {
   switch (requestCode) {
      case PERMISSION_REQUEST_COARSE_LOCATION: {
         // TODO stuff if you need
      }
   }
}
</pre></code>
            <h3>
               <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true">
                <span class="octicon octicon-link"></span>
                </a>Sample
            </h3>              
<p>To start the server you must start the bluetooth discovery with a long time and call this method :</p>
<pre class="prettyprint"><code>setTimeDiscoverable(BluetoothManager.BLUETOOTH_TIME_DICOVERY_3600_SEC);
selectServerMode();</code></pre>

<p>For the client you can use small time for your bluetooth discovery and call this method :</p>
<pre class="prettyprint"><code>setTimeDiscoverable(BluetoothManager.BLUETOOTH_TIME_DICOVERY_120_SEC);
selectClientMode();</code></pre>
<p>For the server to register all clients around just call this method : </p>
<pre class="prettyprint"><code>scanAllBluetoothDevice();</code></pre>
<p>To connect the client to your server call this method : </p>
<pre class="prettyprint"><code>createClient(mServerAddressMac);</code></pre>
            <p><b>You can now send three types of messages</b></p>
            
<p>To send bytes array message :</p> 
<pre class="prettyprint"><code>sendMessageBytesForAll("Hello".getBytes());</code></pre>
            
<p>To send a String message :</p> 
<pre class="prettyprint"><code>sendMessageStringToAll("Hello");</code></pre>
            
<p>To send an Serielizable Object :</p> 
<pre class="prettyprint"><code>sendMessageObjectToAll(mObject);</code></pre>
            
            <p>Don't forget to set which message mode you want to use :</p>
<pre class="prettyprint"><code>setMessageMode(BluetoothManager.MessageMode.String);</code></pre>
<p>Or</p>
<pre class="prettyprint"><code>setMessageMode(BluetoothManager.MessageMode.Serialized);</code></pre>
<p>Or</p>
<pre class="prettyprint"><code>setMessageMode(BluetoothManager.MessageMode.Bytes);</code></pre>
            
<p>And if you want to disconnect : </p>
<pre class="prettyprint"><code>disconnectServer();</code></pre> <p>or</p> <pre class="prettyprint"><code>disconnectClient();</code></pre>
            <h3>
               <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true">
                <span class="octicon octicon-link"></span>
                </a>Bonus
            </h3>         
              <p>If you need more than seven devices connected in your server. Every clients can be also a server in the same time. So you can try to start a server from your client and connect another client on your new server.</p>
           <h3>
               <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true">
                <span class="octicon octicon-link"></span>
                </a>Download
            </h3>
<a  style="padding:5px;background: #eee;
  background: -moz-linear-gradient(top, #f8f8f8 0%, #dddddd 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f8f8f8), color-stop(100%,#dddddd));border-radius: 5px;
  border: 1px solid #d2d2d2;
  box-shadow: inset #fff 0 1px 0, inset rgba(0,0,0,0.03) 0 -1px 0;" href="https://github.com/arissa34/Android-Multi-Bluetooth-Library/raw/master/Bluetooth/Bluetooth_lib/target/AndroidMultiBluetoothLibrary-2.0.4-SNAPSHOT.jar"><strong>Android Multi Bluetooth Library V2.0.4 JAR</strong></a><br><br>
            <p></p>
            <p>The source code to the library and sample application as well as this website is <a target="_blank" href="https://github.com/arissa34/Android-Multi-Bluetooth-Library">available on GitHub</a>.</p>
<h4>MAVEN</h4>
<p>If you are using Maven for compilation you can declare the library as a dependency.</p>
<pre class="prettyprint"><code> &lt;dependencies>
    &lt;dependency>
      &lt;groupId>com.ramimartin.multibluetooth&lt;/groupId>
      &lt;artifactId>AndroidMultiBluetoothLibrary&lt;/artifactId>
      &lt;version>2.0.4-SNAPSHOT&lt;/version>
    &lt;/dependency>
  &lt;/dependencies>

  &lt;repositories>
    &lt;repository>
      &lt;id>drgames&lt;/id>
      &lt;name>Drgames Ftp&lt;/name>
      &lt;url>http://drgames.fr/maven2&lt;/url>
    &lt;/repository>
  &lt;/repositories></code></pre>
<h4>GRADLE</h4>
<pre class="prettyprint"><code>repositories {
    maven {
        url "http://drgames.fr/maven2/"
    }
    mavenCentral()
}

dependencies {
    compile 'com.ramimartin.multibluetooth:AndroidMultiBluetoothLibrary:2.0.4-SNAPSHOT'
}</code></pre>
 
 <h3>This library is used in these applications :</h3>
<a href="https://play.google.com/store/apps/details?id=com.drgames.domino" target="_blank"><img src="images/domino.png" width="120"></a>
<a href="https://play.google.com/store/apps/details?id=com.drgames.puissance4" target="_blank"><img src="images/P4.png" width="120"></a>
            <p>If you like this library please download and give me 5 stars ;)</p>

            <h3><a name="rather-drive-stick" class="anchor" href="#rather-drive-stick"><span class="octicon octicon-link"></span></a>License</h3>

 <pre class="license">
/*
* ----------------------------------------------------------------------------
* "THE BEER-WARE LICENSE" (Revision 42):
* Rami Martin wrote this file.  As long as you retain this notice you
* can do whatever you want with this stuff. If we meet some day, and you think
* this stuff is worth it, you can buy me a beer in return.   Poul-Henning Kamp
* ----------------------------------------------------------------------------
*/</pre>


<!--             <h3><a name="rather-drive-stick" class="anchor" href="#rather-drive-stick"><span class="octicon octicon-link"></span></a>Help me</h3> -->
<!-- 
<div class="helpUsDiv">
  <p class="helpUs">Help me to improve this library by offering me one &#127866; or more  &#127866; &#127866; &#127866;</p>
  <img src="http://arissa34.github.io/Android-Multi-Bluetooth-Library/images/btc/btc_qrcode.png" width="130" class="btcQrcode">
</div>
<div class="btcAddress">
  <i style="font-size:20px;word-wrap: break-word;">1QBj3o5kAyXnn86DZsNsZ1u2kk1i9nfWpA</i>
</div>
-->  

            
      <h3>
        <a name="support-or-contact" class="anchor" href="#support-or-contact">
          <span class="octicon octicon-link"></span>
        </a>Support or Contact
      </h3>

      <p>If you have any questions please feel free to contact me at this email address : <a href="mailto:support@github.com">rami.34000@gmail.com</a></p>
         </section>
         <footer>
            <p>This project is maintained by <a href="https://github.com/arissa34">Rami Martin</a></p>
         </footer>
      </div>

      <script src="javascripts/prettify.js"></script>
    <script>
      prettyPrint();
    </script>
      <script src="javascripts/scale.fix.js"></script>
      <script type="text/javascript">
         var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
         document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      </script>
      <script type="text/javascript">
         try {
           var pageTracker = _gat._getTracker("UA-61291029-2");
         pageTracker._trackPageview();
         } catch(err) {}
      </script>

   </body>
</html>
